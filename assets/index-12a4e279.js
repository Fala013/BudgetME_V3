import{r as i,g as O,j as e,l as R,a as L,b as A,d as q,s as U,R as P}from"./auth-80a3f66b.js";import{r as z}from"./vendor-8ce64704.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))m(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&m(d)}).observe(document,{childList:!0,subtree:!0});function h(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function m(r){if(r.ep)return;r.ep=!0;const s=h(r);fetch(r.href,s)}})();var v={},S=z;v.createRoot=S.createRoot,v.hydrateRoot=S.hydrateRoot;function F(){const[l,u]=i.useState(!0),[h,m]=i.useState(""),[r,s]=i.useState(""),[d,x]=i.useState(""),[c,j]=i.useState(null),[w,b]=i.useState([]),[C,p]=i.useState(!1),[f,y]=i.useState(null),[n,o]=i.useState({type:"entrata",amount:"",description:"",category:"",date:new Date().toISOString().split("T")[0],account:""});i.useEffect(()=>{const t=localStorage.getItem("user");t&&(j(JSON.parse(t)),g(JSON.parse(t).uid))},[]);const g=async t=>{const a=await O(t);b(a)},N=async t=>{t.preventDefault(),x("");try{let a;l?a=await R(h,r):a=await L(h,r),j(a),localStorage.setItem("user",JSON.stringify(a)),g(a.uid)}catch(a){x(a.message)}},D=async()=>{try{await A(),j(null),b([]),localStorage.removeItem("user")}catch(t){x(t.message)}},T=t=>{y(t),o({...t}),p(!0)},E=async t=>{c&&(await q(c.uid,t),g(c.uid))},I=async t=>{if(t.preventDefault(),!c)return;const a={...n};f?a.id=f.id:a.id=Date.now().toString(),await U(c.uid,a),p(!1),y(null),o({type:"entrata",amount:"",description:"",category:"",date:new Date().toISOString().split("T")[0],account:""}),g(c.uid)};return c?e.jsxs("div",{className:"app-container",children:[e.jsx("button",{onClick:D,className:"logout-btn",children:"Logout"}),e.jsx("button",{onClick:()=>{y(null),o({type:"entrata",amount:"",description:"",category:"",date:new Date().toISOString().split("T")[0],account:""}),p(!0)},className:"new-transaction-btn",children:"Nuova Transazione"}),C&&e.jsxs("form",{onSubmit:I,className:"transaction-form",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Tipo"}),e.jsxs("select",{value:n.type,onChange:t=>o({...n,type:t.target.value}),children:[e.jsx("option",{value:"entrata",children:"Entrata"}),e.jsx("option",{value:"uscita",children:"Uscita"}),e.jsx("option",{value:"trasferimento",children:"Trasferimento"})]})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Importo"}),e.jsx("input",{type:"number",step:"0.01",value:n.amount,onChange:t=>o({...n,amount:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Descrizione"}),e.jsx("input",{type:"text",value:n.description,onChange:t=>o({...n,description:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Categoria"}),e.jsx("input",{type:"text",value:n.category,onChange:t=>o({...n,category:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Data"}),e.jsx("input",{type:"date",value:n.date,onChange:t=>o({...n,date:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Conto"}),e.jsx("input",{type:"text",value:n.account,onChange:t=>o({...n,account:t.target.value}),required:!0})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),children:"Annulla"}),e.jsx("button",{type:"submit",children:f?"Modifica":"Aggiungi"})]})]}),e.jsx("h2",{children:"Transazioni"}),e.jsxs("table",{className:"transactions-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Data"}),e.jsx("th",{children:"Descrizione"}),e.jsx("th",{children:"Categoria"}),e.jsx("th",{children:"Conto"}),e.jsx("th",{children:"Importo"}),e.jsx("th",{children:"Azioni"})]})}),e.jsx("tbody",{children:w.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(t.date).toLocaleDateString("it-IT")}),e.jsx("td",{children:t.description}),e.jsx("td",{children:t.category}),e.jsx("td",{children:t.account}),e.jsx("td",{style:{color:t.amount>=0?"green":"red"},children:Number(t.amount).toLocaleString("it-IT",{style:"currency",currency:"EUR"})}),e.jsxs("td",{children:[e.jsx("button",{onClick:()=>T(t),children:"Modifica"}),e.jsx("button",{onClick:()=>E(t.id),children:"Elimina"})]})]},t.id))})]})]}):e.jsxs("div",{className:"login-container",children:[e.jsx("h2",{children:l?"Accedi":"Registrati"}),e.jsxs("form",{onSubmit:N,autoComplete:"on",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email:"}),e.jsx("input",{type:"email",value:h,onChange:t=>m(t.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Password:"}),e.jsx("input",{type:"password",value:r,onChange:t=>s(t.target.value),required:!0,autoComplete:"current-password"})]}),d&&e.jsx("p",{className:"error",children:d}),e.jsx("button",{type:"submit",children:l?"Accedi":"Registrati"})]}),e.jsx("button",{className:"switch-mode",onClick:()=>u(!l),children:l?"Non hai un account? Registrati":"Hai gi√† un account? Accedi"})]})}v.createRoot(document.getElementById("root")).render(e.jsx(P.StrictMode,{children:e.jsx(F,{})}));
